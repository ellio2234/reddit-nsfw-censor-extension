(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{149:function(e,t,n){},151:function(e,t,n){"use strict";n.r(t);var c,a=n(0),s=n.n(a),r=n(57),o=n.n(r),l=(n(64),n(9)),i=n(3),u=n(36),b=n(4),j=n.n(b),O=n(8),f=n(20),p=n(35),d=n(58),x=n.n(d),v=n(59),h=n.n(v),g=n(2),m="medium",w=Object(g.a)({},m,{label:"Medium"}),k="face",S="breasts-exposed",y="breasts-covered",N="genitals-exposed",_="genitals-covered",B="buttocks-exposed",E="buttocks-covered",A="anus",C="armpits",F="stomach",G="feet",J=(c={},Object(g.a)(c,k,{toggleable:!0,label:"Face"}),Object(g.a)(c,S,{toggleable:!1,label:"Breasts (exposed)"}),Object(g.a)(c,y,{toggleable:!0,label:"Breasts (covered)"}),Object(g.a)(c,N,{toggleable:!1,label:"Genitals (exposed)"}),Object(g.a)(c,_,{toggleable:!0,label:"Genitals (covered)"}),Object(g.a)(c,B,{toggleable:!1,label:"Buttocks (exposed)"}),Object(g.a)(c,E,{toggleable:!1,label:"Buttocks (covered)"}),Object(g.a)(c,A,{toggleable:!1,label:"Anus"}),Object(g.a)(c,C,{toggleable:!0,label:"Armpits"}),Object(g.a)(c,F,{toggleable:!0,label:"Stomach"}),Object(g.a)(c,G,{toggleable:!0,label:"Feet"}),Object(g.a)({},"pixels",{label:"Pixels"}),n(149),n(1)),M=function(){return new Promise((function(e){window.chrome.storage.local.get(["n__settings"],(function(t){e(t.n__settings)}))}))},P={"censor-level":m,"detection-server-url":"http://localhost:8040","classification-server-url":"http://localhost:8041"},D=function(e){var t=e.name,n=Object(u.a)(e,["name"]);return Object(J.jsx)(f.a,{name:t,children:function(e){var t=e.input;return Object(J.jsx)("input",Object(i.a)(Object(i.a)({type:"text"},n),t))}})},I=function(e){var t=e.options,n=e.name,c=Object(u.a)(e,["options","name"]);return Object(J.jsx)(f.a,{name:n,children:function(e){var n=e.input;return Object(J.jsx)("select",Object(i.a)(Object(i.a)(Object(i.a)({},c),n),{},{children:t.map((function(e){return Object(J.jsx)("option",Object(i.a)({},e))}))}))}})},L=function(){var e=function(e){return x()(e,h.a)},t=Object(a.useState)({}),n=Object(l.a)(t,2),c=n[0],s=n[1],r=null===c||void 0===c?void 0:c["classification-server-url"],o=null===c||void 0===c?void 0:c["detection-server-url"],u=Object(a.useState)(!1),b=Object(l.a)(u,2),d=b[0],v=b[1],g=Object(a.useState)(!1),m=Object(l.a)(g,2),k=m[0],S=m[1],y=Object(a.useState)(),N=Object(l.a)(y,2),_=N[0],B=N[1],E=Object(a.useState)(),A=Object(l.a)(E,2),C=A[0],F=A[1],G=function(t){return s((function(n){return e(Object(i.a)(Object(i.a)({},n),t))}))},L=function(){var e=Object(O.a)(j.a.mark((function e(t){var n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new AbortController,a=c.signal,setTimeout((function(){return c.abort()}),1e3),e.prev=3,e.next=6,fetch("".concat(t,"/sync"),{signal:a});case 6:e.t0=e.sent.status,n=405===e.t0,e.next=13;break;case 10:e.prev=10,e.t1=e.catch(3),n=!1;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(O.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(r);case 2:t=e.sent,v(!1),B(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(O.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(o);case 2:t=e.sent,S(!1),F(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=(Object(p.a)(R,1e3),Object(p.a)(T,1e3),k?"working":C?"online":"offline"),q=d?"working":_?"online":"offline";return Object(a.useEffect)((function(){v(!0)}),[r]),Object(a.useEffect)((function(){S(!0)}),[o]),Object(a.useEffect)((function(){Object(O.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:t=e.sent,G(Object(i.a)(Object(i.a)({},P),t||{}));case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(a.useEffect)((function(){console.log("settings are",c),window.chrome.storage.local.set({n__settings:e(c)})}),[c]),Object(J.jsxs)("div",{className:"popup",children:[Object(J.jsx)("h3",{children:"Settings"}),Object(J.jsx)(f.b,{onSubmit:G,initialValues:c,children:function(e){var t=e.handleSubmit;return Object(J.jsxs)("form",{onSubmit:t,children:[Object(J.jsxs)("section",{children:[Object(J.jsx)("label",{className:"bold",children:"Level"}),Object(J.jsx)(I,{name:"censor-level",options:Object.keys(w).map((function(e){return{label:w[e].label,value:e}}))})]}),Object(J.jsxs)("section",{children:[Object(J.jsx)("label",{for:"classification-server-url",children:"Classification server url"}),Object(J.jsxs)("span",{className:"row",children:[Object(J.jsx)(D,{name:"classification-server-url",type:"text"}),Object(J.jsx)("span",{className:"status-light status-light--status-".concat(q)})]})]}),Object(J.jsxs)("section",{children:[Object(J.jsx)("label",{for:"detection-server-url",children:"Detection server url"}),Object(J.jsxs)("span",{className:"row",children:[Object(J.jsx)(D,{name:"detection-server-url",type:"text"}),Object(J.jsx)("span",{className:"status-light status-light--status-".concat(V)})]})]}),Object(J.jsx)("section",{children:Object(J.jsx)("input",{type:"submit",value:"Save"})})]})}}),Object(J.jsx)("section",{children:Object(J.jsx)("button",{onClick:function(){return s(P)},children:"Restore defaults"})})]})};o.a.render(Object(J.jsx)(s.a.StrictMode,{children:Object(J.jsx)(L,{})}),document.getElementById("root"))},64:function(e,t,n){}},[[151,1,2]]]);
//# sourceMappingURL=main.079826c0.chunk.js.map